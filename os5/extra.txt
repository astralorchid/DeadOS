pmalloc:
    mov ax, [loopSeg]
    push ax ;save segment
    cmp ax, [maxSeg]
    je .segDone
    
    mov es, ax
    mov bx, [es:0x0000]

    cmp bx, 0x70
    je .hasProgram
    
    mov si, freespaceMsg
    call sprint

    mov ax, es
    mov dx, ax
    xor cx, cx
    xor bx, bx
    call hprint
    call newLine

    pop ax

    mov bx, [minSeg]
    mov [loopSeg], bx
    ret

    .hasProgram:
        mov si, pallocMsg
        call sprint

        mov ax, [loopSeg]
        mov dx, ax
        xor cx, cx
        xor bx, bx
        call hprint
        call newLine

        pop ax
        add ax, [segmentSize]
        mov [loopSeg], ax
        jmp pmalloc

    .segDone:
    pop ax
ret